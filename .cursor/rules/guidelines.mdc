# OpenAPI å¼€å‘è§„èŒƒ

## ğŸ“ æ–‡ä»¶ç»“æ„è§„èŒƒ

### ç›®å½•ç»“æ„
- `openapi-core/` - OpenAPI è§„èŒƒæ ¹ç›®å½•
  - `openapi.yaml` - ä¸»è§„èŒƒæ–‡ä»¶
  - `paths/` - API è·¯å¾„å®šä¹‰ï¼ŒæŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡
  - `components/` - å¯å¤ç”¨ç»„ä»¶
    - `schemas/` - æ•°æ®æ¨¡å‹å®šä¹‰
    - `responses/` - å“åº”æ¨¡å‹å®šä¹‰
    - `headers/` - å“åº”å¤´å®šä¹‰

### æ–‡ä»¶å‘½åè§„èŒƒ
- **è·¯å¾„æ–‡ä»¶**ï¼šä¸‹åˆ’çº¿åˆ†éš”ï¼Œåæ˜ URLç»“æ„ï¼Œå¦‚ `api_v1_auth_login.yaml`
- **ç»„ä»¶æ–‡ä»¶**ï¼šPascalCaseï¼Œå¦‚ `UserApiResponse.yaml`
- **ç»Ÿä¸€ä½¿ç”¨**ï¼š`.yaml` æ‰©å±•å

## ğŸš€ API è§„èŒƒç¼–å†™è§„åˆ™

### å¿…å¡«å­—æ®µ
æ¯ä¸ªAPIç«¯ç‚¹å¿…é¡»åŒ…å«ï¼š
- `operationId` - å”¯ä¸€æ“ä½œæ ‡è¯†ç¬¦ï¼Œä½¿ç”¨camelCase
- `tags` - ä¸­æ–‡æ ‡ç­¾åˆ†ç±»
- `summary` - ä¸­æ–‡æ“ä½œæ‘˜è¦
- `description` - ä¸­æ–‡è¯¦ç»†æè¿°
- `security` - å®‰å…¨é…ç½®ï¼ˆè®¤è¯æ¥å£ä½¿ç”¨ `security: []`ï¼‰
- `responses` - å“åº”å®šä¹‰

### operationId å‘½åçº¦å®š
- **CRUDæ“ä½œ**ï¼š`create{Resource}`, `list{Resources}`, `get{Resource}`, `update{Resource}`, `delete{Resource}`
- **è®¤è¯ç›¸å…³**ï¼š`login`, `logout`, `refreshToken`, `register`, `changePassword`
- **ç‰¹æ®Šæ“ä½œ**ï¼š`activate{Resource}`, `export{Resources}`, `check{Resource}Deletable`

### å“åº”æ ¼å¼è§„èŒƒ
**ç»Ÿä¸€å“åº”è®¾è®¡åŸåˆ™**ï¼š
- HTTPçŠ¶æ€ç å›ºå®šä¸º200
- é€šè¿‡ `code` å­—æ®µåŒºåˆ†çŠ¶æ€ï¼š`code = 0` æˆåŠŸï¼Œ`code != 0` å¤±è´¥
- `data` å­—æ®µï¼šæˆåŠŸæ—¶åŒ…å«ä¸šåŠ¡æ•°æ®ï¼Œå¤±è´¥æ—¶ä¸º `null`

**å“åº”schemaé€‰æ‹©**ï¼š
```yaml
responses:
  '200':
    description: æ¥å£å“åº”
    content:
      application/json:
        schema:
          # è®¤è¯ç›¸å…³APIï¼ˆç™»å½•ã€æ³¨å†Œç­‰ï¼‰
          $ref: '../components/schemas/AuthApiResponse.yaml'
          # ç”¨æˆ·ä¿¡æ¯ç›¸å…³API
          $ref: '../components/schemas/UserApiResponse.yaml'  
          # ç®€å•æ“ä½œï¼ˆç™»å‡ºã€ä¿®æ”¹å¯†ç ç­‰ï¼‰
          $ref: '../components/schemas/SimpleApiResponse.yaml'
```

**discriminatorå·¥ä½œåŸç†**ï¼š
åŸºäº `code` å­—æ®µå€¼ç¡®å®šå…·ä½“å“åº”schemaï¼š
- `code = 0` æ—¶ä½¿ç”¨æˆåŠŸå“åº”schema
- `code != 0` æ—¶ä½¿ç”¨ `ErrorResponse.yaml`

**é”™è¯¯ç çº¦å®š**ï¼š
- `0` - æˆåŠŸ
- `40001-49999` - å®¢æˆ·ç«¯é”™è¯¯
- `50001-59999` - æœåŠ¡ç«¯é”™è¯¯
- `40101` - è®¤è¯å¤±è´¥
- `40001` - å‚æ•°éªŒè¯å¤±è´¥

### å®‰å…¨é…ç½®
- **éœ€è¦è®¤è¯**ï¼š`security: - BearerAuth: []`
- **ä¸éœ€è¦è®¤è¯**ï¼š`security: []`ï¼ˆç™»å½•ã€æ³¨å†Œç­‰ï¼‰

### å‚æ•°å®šä¹‰è§„èŒƒ
**åˆ†é¡µå‚æ•°**ï¼š
- `page` - é¡µç ï¼Œä»1å¼€å§‹ï¼Œé»˜è®¤1
- `page_size` - æ¯é¡µæ•°é‡ï¼Œé»˜è®¤10ï¼Œæœ€å¤§100
- `total` - æ˜¯å¦è¿”å›æ€»æ•°ï¼Œå¸ƒå°”å€¼ï¼Œé»˜è®¤false

**è·¯å¾„å‚æ•°**ï¼š
- å¿…é¡»è®¾ç½® `required: true`
- IDå‚æ•°ï¼š`type: string, maxLength: 26, minLength: 1`

## ğŸ”§ è´¨é‡è¦æ±‚

### Lintæ£€æŸ¥
ä½¿ç”¨Redocly CLIè¿›è¡ŒéªŒè¯ï¼š
```bash
npm run test    # è¿è¡Œlintæ£€æŸ¥
npm start       # æœ¬åœ°é¢„è§ˆ
npm run build:core  # æ„å»ºæ–‡æ¡£
```

### å¿…é¡»é€šè¿‡
- 0ä¸ª `error` çº§åˆ«é—®é¢˜
- 0ä¸ª `warning` çº§åˆ«é—®é¢˜
- æ‰€æœ‰ `$ref` å¼•ç”¨è·¯å¾„æ­£ç¡®
- æ‰€æœ‰ `operationId` å…¨å±€å”¯ä¸€

## ğŸ“ å¼€å‘æµç¨‹

### æ–°å¢APIæ­¥éª¤
1. åœ¨ `paths/` ç›®å½•åˆ›å»ºè·¯å¾„æ–‡ä»¶
2. å®šä¹‰å¿…è¦çš„è¾“å…¥è¾“å‡ºæ¨¡å‹
3. åœ¨ä¸»è§„èŒƒæ–‡ä»¶ä¸­æ·»åŠ è·¯å¾„å¼•ç”¨
4. è¿è¡Œ `npm run test` æ£€æŸ¥
5. è¿è¡Œ `npm start` éªŒè¯æ–‡æ¡£

### æäº¤å‰æ£€æŸ¥
- [ ] æ‰€æœ‰å¿…å¡«å­—æ®µå·²å®šä¹‰
- [ ] å“åº”æ ¼å¼ç¬¦åˆç»Ÿä¸€è§„èŒƒ
- [ ] å®‰å…¨é…ç½®æ­£ç¡®
- [ ] é€šè¿‡æ‰€æœ‰lintæ£€æŸ¥
- [ ] æ–‡æ¡£ç”Ÿæˆæ­£å¸¸ 
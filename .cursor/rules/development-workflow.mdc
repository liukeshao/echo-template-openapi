---
description: 
globs: 
alwaysApply: false
---
# å¼€å‘å·¥ä½œæµç¨‹

æœ¬æŒ‡å—æè¿°äº†å¦‚ä½•åœ¨è¿™ä¸ª OpenAPI æ¨¡æ¿é¡¹ç›®ä¸­è¿›è¡Œå¼€å‘å·¥ä½œã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒè®¾ç½®
```bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨æ–‡æ¡£é¢„è§ˆï¼ˆé»˜è®¤ç«¯å£ 8080ï¼‰
npm start

# éªŒè¯ OpenAPI è§„èŒƒ
npm test
```

### 2. å¼€å‘æµç¨‹
1. **ç¼–è¾‘ OpenAPI æ–‡ä»¶** - ä¿®æ”¹ [openapi/](mdc:openapi) ç›®å½•ä¸‹çš„æ–‡ä»¶
2. **å®æ—¶é¢„è§ˆ** - ä½¿ç”¨ `npm start` æŸ¥çœ‹æ–‡æ¡£å˜åŒ–
3. **éªŒè¯è§„èŒƒ** - ä½¿ç”¨ `npm test` ç¡®ä¿è¯­æ³•æ­£ç¡®
4. **æ„å»ºå‘å¸ƒ** - ä½¿ç”¨ `npm run build` ç”Ÿæˆæœ€ç»ˆæ–‡æ¡£

## â• æ·»åŠ æ–°çš„ API ç«¯ç‚¹

### æ­¥éª¤ 1: åˆ›å»ºè·¯å¾„æ–‡ä»¶
åœ¨ `openapi/paths/` ç›®å½•ä¸‹åˆ›å»ºæ–°æ–‡ä»¶ï¼Œå‘½åè§„åˆ™ï¼š
- URL: `/api/v1/products/{id}` â†’ æ–‡ä»¶å: `api_v1_products_{id}.yaml`

### æ­¥éª¤ 2: å®šä¹‰ API æ“ä½œ
```yaml
get:
  tags:
    - äº§å“ç®¡ç†
  summary: è·å–äº§å“è¯¦æƒ…
  operationId: getProduct
  parameters:
    - name: id
      in: path
      required: true
      schema:
        type: string
  responses:
    '200':
      description: æˆåŠŸè·å–äº§å“ä¿¡æ¯
      content:
        application/json:
          schema:
            $ref: ../components/schemas/ProductResponse.yaml
```

### æ­¥éª¤ 3: åœ¨ä¸»æ–‡ä»¶ä¸­å¼•ç”¨
åœ¨ [openapi.yaml](mdc:openapi/openapi.yaml) çš„ `paths` éƒ¨åˆ†æ·»åŠ ï¼š
```yaml
/api/v1/products/{id}:
  $ref: paths/api_v1_products_{id}.yaml
```

## ğŸ“Š æ·»åŠ æ•°æ®æ¨¡å‹

### æ­¥éª¤ 1: åˆ›å»º Schema æ–‡ä»¶
åœ¨ `openapi/components/schemas/` ç›®å½•ä¸‹åˆ›å»ºï¼Œå¦‚ `Product.yaml`ï¼š
```yaml
type: object
properties:
  id:
    type: string
    description: äº§å“å”¯ä¸€æ ‡è¯†
  name:
    type: string
    description: äº§å“åç§°
  price:
    type: number
    format: double
    description: äº§å“ä»·æ ¼
required:
  - id
  - name
  - price
```

### æ­¥éª¤ 2: åœ¨ä¸»æ–‡ä»¶ä¸­æ³¨å†Œ
åœ¨ [openapi.yaml](mdc:openapi/openapi.yaml) çš„ `components.schemas` éƒ¨åˆ†æ·»åŠ ï¼š
```yaml
Product:
  $ref: components/schemas/Product.yaml
```

## ğŸ” éªŒè¯å’Œè°ƒè¯•

### ä½¿ç”¨ Redocly CLI
```bash
# è¯¦ç»†çš„éªŒè¯æŠ¥å‘Š
npx redocly lint openapi/openapi.yaml

# æ£€æŸ¥ç‰¹å®šæ–‡ä»¶
npx redocly lint openapi/paths/api_v1_auth_login.yaml

# ç”Ÿæˆé™æ€æ–‡æ¡£
npx redocly build-docs openapi/openapi.yaml --output docs/
```

### å¸¸è§é—®é¢˜æ’æŸ¥
1. **å¼•ç”¨è·¯å¾„é”™è¯¯** - æ£€æŸ¥ `$ref` è·¯å¾„æ˜¯å¦æ­£ç¡®
2. **å¾ªç¯å¼•ç”¨** - é¿å… Schema ä¹‹é—´çš„å¾ªç¯ä¾èµ–
3. **è¯­æ³•é”™è¯¯** - ä½¿ç”¨ `npm test` è¿›è¡ŒéªŒè¯

## ğŸ“š ä»£ç ç¤ºä¾‹ç®¡ç†

### æ·»åŠ ä»£ç ç¤ºä¾‹
åœ¨ `openapi/code_samples/` ç›®å½•ä¸‹æŒ‰è¯­è¨€ç»„ç»‡ï¼š
- å¯æ·»åŠ å…¶ä»–è¯­è¨€ç›®å½•

### ç¤ºä¾‹æ–‡ä»¶ç»“æ„
```
code_samples/
â”œâ”€â”€ JavaScript/
â”‚   â””â”€â”€ auth/
â”‚       â””â”€â”€ login.js
â””â”€â”€ Python/
    â””â”€â”€ auth/
        â””â”€â”€ login.py
```

## ğŸ·ï¸ ç‰ˆæœ¬ç®¡ç†å»ºè®®
- åœ¨ [openapi.yaml](mdc:openapi/openapi.yaml) ä¸­ç»´æŠ¤ç‰ˆæœ¬å·
- é‡å¤§å˜æ›´æ—¶åˆ›å»ºæ–°çš„ç‰ˆæœ¬åˆ†æ”¯
- ä½¿ç”¨ Git æ ‡ç­¾æ ‡è®°å‘å¸ƒç‰ˆæœ¬
